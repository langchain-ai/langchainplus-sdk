cloned from commit f2a8460559d8f58269f306679fc58c9d101f70cf (tag: v0.23.4)

then apply diff:

diff --git a/vendor/pyo3/pyo3-ffi/src/object.rs b/vendor/pyo3/pyo3-ffi/src/object.rs
index 3f086ac1..51083a8e 100644
--- a/vendor/pyo3/pyo3-ffi/src/object.rs
+++ b/vendor/pyo3/pyo3-ffi/src/object.rs
@@ -214,7 +214,7 @@ pub unsafe fn Py_SIZE(ob: *mut PyObject) -> Py_ssize_t {

 #[inline(always)]
 #[cfg(all(Py_3_12, not(Py_GIL_DISABLED)))]
-unsafe fn _Py_IsImmortal(op: *mut PyObject) -> c_int {
+pub unsafe fn _Py_IsImmortal(op: *mut PyObject) -> c_int {
     #[cfg(target_pointer_width = "64")]
     {
         (((*op).ob_refcnt.ob_refcnt as crate::PY_INT32_T) < 0) as c_int
